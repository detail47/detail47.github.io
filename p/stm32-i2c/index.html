<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="STM32æ ‡å‡†åº“å­¦ä¹ ç¬”è®°-STM32 I2C">
<title>STM32 I2C</title>

<link rel='canonical' href='https://detail47.github.io/p/stm32-i2c/'>

<link rel="stylesheet" href="/scss/style.min.86591c898bd806857815fbb8c47e8d3fed97c133b78e83d9bfc27b164dd0aa2b.css"><meta property='og:title' content="STM32 I2C">
<meta property='og:description' content="STM32æ ‡å‡†åº“å­¦ä¹ ç¬”è®°-STM32 I2C">
<meta property='og:url' content='https://detail47.github.io/p/stm32-i2c/'>
<meta property='og:site_name' content='Detail&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2024-02-20T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2024-02-20T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="STM32 I2C">
<meta name="twitter:description" content="STM32æ ‡å‡†åº“å­¦ä¹ ç¬”è®°-STM32 I2C">
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_c89fa279e410603e.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ˜‰</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Detail&#39;s Blog</a></h1>
            <h2 class="site-description">æœ¬ç«™ç‚¹ä½œä¸ºä¸ªäººå­¦ä¹ ç¬”è®°</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='mailto:linxiangxi@outlook.com'
                        target="_blank"
                        title="Email"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10" /><path d="M3 7l9 6l9 -6" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/detail47'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#i2cç®€ä»‹">I2Cç®€ä»‹</a></li>
    <li><a href="#ç¡¬ä»¶ç”µè·¯">ç¡¬ä»¶ç”µè·¯</a>
      <ol>
        <li><a href="#i2cæ—¶åºåŸºæœ¬å•å…ƒ">I2Cæ—¶åºåŸºæœ¬å•å…ƒ</a></li>
        <li><a href="#i2cæ—¶åº">I2Cæ—¶åº</a>
          <ol>
            <li><a href="#æŒ‡å®šåœ°å€å†™">æŒ‡å®šåœ°å€å†™</a></li>
            <li><a href="#å½“å‰åœ°å€è¯»">å½“å‰åœ°å€è¯»</a></li>
            <li><a href="#æŒ‡å®šåœ°å€è¯»">æŒ‡å®šåœ°å€è¯»</a></li>
          </ol>
        </li>
        <li><a href="#i2cå¤–è®¾">I2Cå¤–è®¾</a>
          <ol>
            <li><a href="#åºåˆ—å›¾">åºåˆ—å›¾</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#ä»£ç ">ä»£ç </a>
      <ol>
        <li><a href="#è½¯ä»¶i2c">è½¯ä»¶I2C</a></li>
        <li><a href="#ç¡¬ä»¶i2c">ç¡¬ä»¶I2C</a></li>
        <li><a href="#i2cäº‹ä»¶æµç¨‹å¸¸ç”¨çš„ä¸»æ¨¡å¼">I2Cäº‹ä»¶æµç¨‹ï¼ˆå¸¸ç”¨çš„ä¸»æ¨¡å¼ï¼‰</a>
          <ol>
            <li><a href="#é€šè®¯å¼€å§‹">é€šè®¯å¼€å§‹</a></li>
            <li><a href="#åœ°å€ç¡®è®¤">åœ°å€ç¡®è®¤</a></li>
            <li><a href="#é€šè®¯äº‹ä»¶">é€šè®¯äº‹ä»¶</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            
            
            
            <a href="/categories/stm32/" style="background-color: #9d3d2a; color: #fff;">
                STM32
            </a>
        
            
            
            
            <a href="/categories/c/" style="background-color: #9d3d2a; color: #fff;">
                C
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/stm32-i2c/">STM32 I2C</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            STM32æ ‡å‡†åº“å­¦ä¹ ç¬”è®°-STM32 I2C
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published" datetime='2024-02-20T00:00:00Z'>2024-02-20</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="i2cç®€ä»‹">I2Cç®€ä»‹
</h2><ul>
<li>I2Cï¼ˆInter IC Busï¼‰æ˜¯ç”±Philipså…¬å¸å¼€å‘çš„ä¸€ç§é€šç”¨æ•°æ®æ€»çº¿</li>
<li>ä¸¤æ ¹é€šä¿¡çº¿ï¼šSCLï¼ˆSerial Clockï¼‰ã€SDAï¼ˆSerial Dataï¼‰</li>
<li>åŒæ­¥ï¼ŒåŠåŒå·¥</li>
<li>å¸¦æ•°æ®åº”ç­”</li>
<li>æ”¯æŒæ€»çº¿æŒ‚è½½å¤šè®¾å¤‡ï¼ˆä¸€ä¸»å¤šä»ã€å¤šä¸»å¤šä»ï¼‰</li>
</ul>
<h2 id="ç¡¬ä»¶ç”µè·¯">ç¡¬ä»¶ç”µè·¯
</h2><ul>
<li>æ‰€æœ‰I2Cè®¾å¤‡çš„SCLè¿åœ¨ä¸€èµ·ï¼ŒSDAè¿åœ¨ä¸€èµ·</li>
<li>è®¾å¤‡çš„SCLå’ŒSDAå‡è¦é…ç½®æˆå¼€æ¼è¾“å‡ºæ¨¡å¼</li>
<li>SCLå’ŒSDAå„æ·»åŠ ä¸€ä¸ªä¸Šæ‹‰ç”µé˜»ï¼Œé˜»å€¼ä¸€èˆ¬ä¸º4.7KÎ©å·¦å³</li>
</ul>
<p><img src="/p/stm32-i2c/31ccb88bf87dd201536a5d304ed80a46972493fe.png"
	width="964"
	height="460"
	srcset="/p/stm32-i2c/31ccb88bf87dd201536a5d304ed80a46972493fe_hu_51b0d8e8ec744f00.png 480w, /p/stm32-i2c/31ccb88bf87dd201536a5d304ed80a46972493fe_hu_562e683a9ddcaedd.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="209"
		data-flex-basis="502px"
	
>
<img src="/p/stm32-i2c/2168e48105b14cc537fe1de5f4aaa70f73ef9dcf.png"
	width="722"
	height="460"
	srcset="/p/stm32-i2c/2168e48105b14cc537fe1de5f4aaa70f73ef9dcf_hu_51f93f0c3cfab150.png 480w, /p/stm32-i2c/2168e48105b14cc537fe1de5f4aaa70f73ef9dcf_hu_b687d19276346e55.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="156"
		data-flex-basis="376px"
	
></p>
<h3 id="i2cæ—¶åºåŸºæœ¬å•å…ƒ">I2Cæ—¶åºåŸºæœ¬å•å…ƒ
</h3><ul>
<li>èµ·å§‹æ¡ä»¶ï¼šSCLé«˜ç”µå¹³æœŸé—´ï¼ŒSDAä»é«˜ç”µå¹³åˆ‡æ¢åˆ°ä½ç”µå¹³</li>
<li>ç»ˆæ­¢æ¡ä»¶ï¼šSCLé«˜ç”µå¹³æœŸé—´ï¼ŒSDAä»ä½ç”µå¹³åˆ‡æ¢åˆ°é«˜ç”µå¹³</li>
</ul>
<p><img src="/p/stm32-i2c/4edcb3174050174eda84418e7bdde0b21601a7da.png"
	width="689"
	height="235"
	srcset="/p/stm32-i2c/4edcb3174050174eda84418e7bdde0b21601a7da_hu_6e7df752f33ce646.png 480w, /p/stm32-i2c/4edcb3174050174eda84418e7bdde0b21601a7da_hu_d8d23d2dba4bf1f6.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="293"
		data-flex-basis="703px"
	
></p>
<ul>
<li>å‘é€ä¸€ä¸ªå­—èŠ‚ï¼šSCLä½ç”µå¹³æœŸé—´ï¼Œä¸»æœºå°†æ•°æ®ä½ä¾æ¬¡æ”¾åˆ°SDAçº¿ä¸Šï¼ˆé«˜ä½å…ˆè¡Œï¼‰ï¼Œç„¶åé‡Šæ”¾SCLï¼Œä»æœºå°†åœ¨SCLé«˜ç”µå¹³æœŸé—´è¯»å–æ•°æ®ä½ï¼Œæ‰€ä»¥SCLé«˜ç”µå¹³æœŸé—´SDAä¸å…è®¸æœ‰æ•°æ®å˜åŒ–ï¼Œä¾æ¬¡å¾ªç¯ä¸Šè¿°è¿‡ç¨‹8æ¬¡ï¼Œå³å¯å‘é€ä¸€ä¸ªå­—èŠ‚</li>
</ul>
<p><img src="/p/stm32-i2c/d5beb120130f98d74cfe1ab4fa84086ac15a1048.png"
	width="800"
	height="197"
	srcset="/p/stm32-i2c/d5beb120130f98d74cfe1ab4fa84086ac15a1048_hu_2f6c4fb01e6737ff.png 480w, /p/stm32-i2c/d5beb120130f98d74cfe1ab4fa84086ac15a1048_hu_d650b47553b5b8cb.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="406"
		data-flex-basis="974px"
	
></p>
<ul>
<li>æ¥æ”¶ä¸€ä¸ªå­—èŠ‚ï¼šSCLä½ç”µå¹³æœŸé—´ï¼Œä»æœºå°†æ•°æ®ä½ä¾æ¬¡æ”¾åˆ°SDAçº¿ä¸Šï¼ˆé«˜ä½å…ˆè¡Œï¼‰ï¼Œç„¶åé‡Šæ”¾SCLï¼Œä¸»æœºå°†åœ¨SCLé«˜ç”µå¹³æœŸé—´è¯»å–æ•°æ®ä½ï¼Œæ‰€ä»¥SCLé«˜ç”µå¹³æœŸé—´SDAä¸å…è®¸æœ‰æ•°æ®å˜åŒ–ï¼Œä¾æ¬¡å¾ªç¯ä¸Šè¿°è¿‡ç¨‹8æ¬¡ï¼Œå³å¯æ¥æ”¶ä¸€ä¸ªå­—èŠ‚ï¼ˆä¸»æœºåœ¨æ¥æ”¶ä¹‹å‰ï¼Œéœ€è¦é‡Šæ”¾SDAï¼‰</li>
</ul>
<p><img src="/p/stm32-i2c/769979e331395594ca80189871ccda8405dad02e.png"
	width="779"
	height="190"
	srcset="/p/stm32-i2c/769979e331395594ca80189871ccda8405dad02e_hu_a5b9d815fc8bd12c.png 480w, /p/stm32-i2c/769979e331395594ca80189871ccda8405dad02e_hu_ad5f0ec537468028.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="410"
		data-flex-basis="984px"
	
></p>
<ul>
<li>å‘é€åº”ç­”ï¼šä¸»æœºåœ¨æ¥æ”¶å®Œä¸€ä¸ªå­—èŠ‚ä¹‹åï¼Œåœ¨ä¸‹ä¸€ä¸ªæ—¶é’Ÿå‘é€ä¸€ä½æ•°æ®ï¼Œæ•°æ®0è¡¨ç¤ºåº”ç­”ï¼Œæ•°æ®1è¡¨ç¤ºéåº”ç­”</li>
<li>æ¥æ”¶åº”ç­”ï¼šä¸»æœºåœ¨å‘é€å®Œä¸€ä¸ªå­—èŠ‚ä¹‹åï¼Œåœ¨ä¸‹ä¸€ä¸ªæ—¶é’Ÿæ¥æ”¶ä¸€ä½æ•°æ®ï¼Œåˆ¤æ–­ä»æœºæ˜¯å¦åº”ç­”ï¼Œæ•°æ®0è¡¨ç¤ºåº”ç­”ï¼Œæ•°æ®1è¡¨ç¤ºéåº”ç­”ï¼ˆä¸»æœºåœ¨æ¥æ”¶ä¹‹å‰ï¼Œéœ€è¦é‡Šæ”¾SDAï¼‰</li>
</ul>
<p><img src="/p/stm32-i2c/63f4d93e60dfda02aa441b2ba603d3a7b9278046.png"
	width="754"
	height="179"
	srcset="/p/stm32-i2c/63f4d93e60dfda02aa441b2ba603d3a7b9278046_hu_ae659cdd24d5cefe.png 480w, /p/stm32-i2c/63f4d93e60dfda02aa441b2ba603d3a7b9278046_hu_b00006a00efb52e7.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="421"
		data-flex-basis="1010px"
	
></p>
<h3 id="i2cæ—¶åº">I2Cæ—¶åº
</h3><h4 id="æŒ‡å®šåœ°å€å†™">æŒ‡å®šåœ°å€å†™
</h4><p>å¯¹äºæŒ‡å®šè®¾å¤‡ï¼ˆSlave Addressï¼‰ï¼Œåœ¨æŒ‡å®šåœ°å€ï¼ˆReg Addressï¼‰ä¸‹ï¼Œå†™å…¥æŒ‡å®šæ•°æ®ï¼ˆDataï¼‰</p>
<p><img src="/p/stm32-i2c/0d7b687afc0036017ef2cb84f8eae2082d9003f3.png"
	width="1748"
	height="411"
	srcset="/p/stm32-i2c/0d7b687afc0036017ef2cb84f8eae2082d9003f3_hu_b833a3b41e44f4c8.png 480w, /p/stm32-i2c/0d7b687afc0036017ef2cb84f8eae2082d9003f3_hu_cf954a3a44452f1.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="425"
		data-flex-basis="1020px"
	
></p>
<h4 id="å½“å‰åœ°å€è¯»">å½“å‰åœ°å€è¯»
</h4><p>å¯¹äºæŒ‡å®šè®¾å¤‡ï¼ˆSlave Addressï¼‰ï¼Œåœ¨å½“å‰åœ°å€æŒ‡é’ˆæŒ‡ç¤ºçš„åœ°å€ä¸‹ï¼Œè¯»å–ä»æœºæ•°æ®ï¼ˆDataï¼‰</p>
<p><img src="/p/stm32-i2c/db46160d3f76ada474458ba8efabc7e47eb687cd.png"
	width="1528"
	height="504"
	srcset="/p/stm32-i2c/db46160d3f76ada474458ba8efabc7e47eb687cd_hu_74d53347a66bc72a.png 480w, /p/stm32-i2c/db46160d3f76ada474458ba8efabc7e47eb687cd_hu_5c9dae9b2aeb0b72.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="303"
		data-flex-basis="727px"
	
></p>
<h4 id="æŒ‡å®šåœ°å€è¯»">æŒ‡å®šåœ°å€è¯»
</h4><p>å¯¹äºæŒ‡å®šè®¾å¤‡ï¼ˆSlave Addressï¼‰ï¼Œåœ¨æŒ‡å®šåœ°å€ï¼ˆReg Addressï¼‰ä¸‹ï¼Œè¯»å–ä»æœºæ•°æ®ï¼ˆDataï¼‰</p>
<p><img src="/p/stm32-i2c/30b2f3274a5ccde050588deb9a7f1b3295fcaffe.png"
	width="1892"
	height="336"
	srcset="/p/stm32-i2c/30b2f3274a5ccde050588deb9a7f1b3295fcaffe_hu_3aedd80136c90794.png 480w, /p/stm32-i2c/30b2f3274a5ccde050588deb9a7f1b3295fcaffe_hu_165540a0be06fcf1.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="563"
		data-flex-basis="1351px"
	
></p>
<h3 id="i2cå¤–è®¾">I2Cå¤–è®¾
</h3><ul>
<li>STM32å†…éƒ¨é›†æˆäº†ç¡¬ä»¶I2Cæ”¶å‘ç”µè·¯ï¼Œå¯ä»¥ç”±ç¡¬ä»¶è‡ªåŠ¨æ‰§è¡Œæ—¶é’Ÿç”Ÿæˆã€èµ·å§‹ç»ˆæ­¢æ¡ä»¶ç”Ÿæˆã€åº”ç­”ä½æ”¶å‘ã€æ•°æ®æ”¶å‘ç­‰åŠŸèƒ½ï¼Œå‡è½»CPUçš„è´Ÿæ‹…</li>
<li>æ”¯æŒå¤šä¸»æœºæ¨¡å‹</li>
<li>æ”¯æŒ7ä½/10ä½åœ°å€æ¨¡å¼</li>
<li>æ”¯æŒä¸åŒçš„é€šè®¯é€Ÿåº¦ï¼Œæ ‡å‡†é€Ÿåº¦(é«˜è¾¾100 kHz)ï¼Œå¿«é€Ÿ(é«˜è¾¾400 kHz)</li>
<li>æ”¯æŒDMA</li>
<li>å…¼å®¹SMBusåè®®</li>
</ul>
<p>å®é™…å¤–è®¾:
STM32F103C8T6 ç¡¬ä»¶I2Cèµ„æºï¼šI2C1ã€I2C2</p>
<p><img src="/p/stm32-i2c/3d65bb9cff4ba913603434aba379e56af74ac79e.png"
	width="970"
	height="882"
	srcset="/p/stm32-i2c/3d65bb9cff4ba913603434aba379e56af74ac79e_hu_d61108161fc4dd4d.png 480w, /p/stm32-i2c/3d65bb9cff4ba913603434aba379e56af74ac79e_hu_49802af25fafcc6b.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="109"
		data-flex-basis="263px"
	
></p>
<p><img src="/p/stm32-i2c/8efa34d47159523adde964f15523d7d632be4b10.png"
	width="1755"
	height="819"
	srcset="/p/stm32-i2c/8efa34d47159523adde964f15523d7d632be4b10_hu_19860239ac384538.png 480w, /p/stm32-i2c/8efa34d47159523adde964f15523d7d632be4b10_hu_88c17e0f0eb57ea8.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="214"
		data-flex-basis="514px"
	
></p>
<h4 id="åºåˆ—å›¾">åºåˆ—å›¾
</h4><p><img src="/p/stm32-i2c/29d2b2e80a4ac8e30906b5007835c3129295319b.png"
	width="1418"
	height="814"
	srcset="/p/stm32-i2c/29d2b2e80a4ac8e30906b5007835c3129295319b_hu_19ac6df377be764e.png 480w, /p/stm32-i2c/29d2b2e80a4ac8e30906b5007835c3129295319b_hu_3f1fba6fd7d1e3a7.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="174"
		data-flex-basis="418px"
	
></p>
<p><img src="/p/stm32-i2c/c7601e6923662938926bf2dd46c1035a23208a97.png"
	width="1418"
	height="862"
	srcset="/p/stm32-i2c/c7601e6923662938926bf2dd46c1035a23208a97_hu_c6a36a707d127f1f.png 480w, /p/stm32-i2c/c7601e6923662938926bf2dd46c1035a23208a97_hu_6ce6cb07aa35ed43.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="164"
		data-flex-basis="394px"
	
></p>
<h2 id="ä»£ç ">ä»£ç 
</h2><h3 id="è½¯ä»¶i2c">è½¯ä»¶I2C
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span><span class="lnt">96
</span><span class="lnt">97
</span><span class="lnt">98
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cm">/*ç¡¬ä»¶*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// SCLå†™
</span></span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">MyI2C_W_SCL</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">BitValue</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="nf">GPIO_WriteBit</span><span class="p">(</span><span class="n">GPIOB</span><span class="p">,</span> <span class="n">GPIO_Pin_10</span><span class="p">,</span> <span class="p">(</span><span class="n">BitAction</span><span class="p">)</span><span class="n">BitValue</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Delay_us</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// SDAå†™
</span></span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">MyI2C_W_SDA</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">BitValue</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="nf">GPIO_WriteBit</span><span class="p">(</span><span class="n">GPIOB</span><span class="p">,</span> <span class="n">GPIO_Pin_11</span><span class="p">,</span> <span class="p">(</span><span class="n">BitAction</span><span class="p">)</span><span class="n">BitValue</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Delay_us</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// SDAè¯»
</span></span></span><span class="line"><span class="cl"><span class="kt">uint8_t</span> <span class="nf">MyI2C_R_SDA</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">uint8_t</span> <span class="n">BitValue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">BitValue</span> <span class="o">=</span> <span class="nf">GPIO_ReadInputDataBit</span><span class="p">(</span><span class="n">GPIOB</span><span class="p">,</span> <span class="n">GPIO_Pin_11</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Delay_us</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">BitValue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//GPIOé…ç½®
</span></span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">MyI2C_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">RCC_APB2PeriphClockCmd</span><span class="p">(</span><span class="n">RCC_APB2Periph_GPIOB</span><span class="p">,</span> <span class="n">ENABLE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">GPIO_InitTypeDef</span> <span class="n">GPIO_InitStructure</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">GPIO_InitStructure</span><span class="p">.</span><span class="n">GPIO_Mode</span> <span class="o">=</span> <span class="n">GPIO_Mode_Out_OD</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">GPIO_InitStructure</span><span class="p">.</span><span class="n">GPIO_Pin</span> <span class="o">=</span> <span class="n">GPIO_Pin_10</span> <span class="o">|</span> <span class="n">GPIO_Pin_11</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">GPIO_InitStructure</span><span class="p">.</span><span class="n">GPIO_Speed</span> <span class="o">=</span> <span class="n">GPIO_Speed_50MHz</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">GPIO_Init</span><span class="p">(</span><span class="n">GPIOB</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">GPIO_InitStructure</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">GPIO_SetBits</span><span class="p">(</span><span class="n">GPIOB</span><span class="p">,</span> <span class="n">GPIO_Pin_10</span> <span class="o">|</span> <span class="n">GPIO_Pin_11</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*åè®®*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//å¼€å§‹æ ‡å¿—
</span></span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">MyI2C_Start</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="nf">MyI2C_W_SDA</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">MyI2C_W_SCL</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">MyI2C_W_SDA</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">MyI2C_W_SCL</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//ç»“æŸæ ‡å¿—
</span></span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">MyI2C_Stop</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">MyI2C_W_SDA</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">MyI2C_W_SCL</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">MyI2C_W_SDA</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//å‘é€æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">MyI2C_SendByte</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">Byte</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">uint8_t</span> <span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span> <span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">MyI2C_W_SDA</span><span class="p">(</span><span class="n">Byte</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mh">0x80</span> <span class="o">&gt;&gt;</span> <span class="n">i</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="nf">MyI2C_W_SCL</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nf">MyI2C_W_SCL</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//æ¥æ”¶æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="kt">uint8_t</span> <span class="nf">MyI2C_ReceiveByte</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">uint8_t</span> <span class="n">i</span><span class="p">,</span> <span class="n">Byte</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">MyI2C_W_SDA</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span> <span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">MyI2C_W_SCL</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nf">MyI2C_R_SDA</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">Byte</span> <span class="o">|=</span> <span class="p">(</span><span class="mh">0x80</span> <span class="o">&gt;&gt;</span> <span class="n">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nf">MyI2C_W_SCL</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">Byte</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//åº”ç­”ä¿¡å·å‘é€
</span></span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">MyI2C_SendAck</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">AckBit</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">MyI2C_W_SDA</span><span class="p">(</span><span class="n">AckBit</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">MyI2C_W_SCL</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">MyI2C_W_SCL</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//åº”ç­”ä¿¡å·æ¥æ”¶
</span></span></span><span class="line"><span class="cl"><span class="kt">uint8_t</span> <span class="nf">MyI2C_ReceiveAck</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">uint8_t</span> <span class="n">AckBit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">MyI2C_W_SDA</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">MyI2C_W_SCL</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">AckBit</span> <span class="o">=</span> <span class="nf">MyI2C_R_SDA</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nf">MyI2C_W_SCL</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">AckBit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¡¬ä»¶i2c">ç¡¬ä»¶I2C
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">//ç¡¬ä»¶åœ°å€
</span></span></span><span class="line"><span class="cl"><span class="cp">#define ADDRESS 0xD0
</span></span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//æ—¶é’Ÿé…ç½®
</span></span></span><span class="line"><span class="cl"><span class="nf">RCC_APB1PeriphClockCmd</span><span class="p">(</span><span class="n">RCC_APB1Periph_I2C2</span><span class="p">,</span> <span class="n">ENABLE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nf">RCC_APB2PeriphClockCmd</span><span class="p">(</span><span class="n">RCC_APB2Periph_GPIOB</span><span class="p">,</span> <span class="n">ENABLE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//GPIOé…ç½®
</span></span></span><span class="line"><span class="cl"><span class="n">GPIO_InitTypeDef</span> <span class="n">GPIO_InitStructure</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">GPIO_InitStructure</span><span class="p">.</span><span class="n">GPIO_Mode</span> <span class="o">=</span> <span class="n">GPIO_Mode_AF_OD</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">GPIO_InitStructure</span><span class="p">.</span><span class="n">GPIO_Pin</span> <span class="o">=</span> <span class="n">GPIO_Pin_10</span> <span class="o">|</span> <span class="n">GPIO_Pin_11</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">GPIO_InitStructure</span><span class="p">.</span><span class="n">GPIO_Speed</span> <span class="o">=</span> <span class="n">GPIO_Speed_50MHz</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nf">GPIO_Init</span><span class="p">(</span><span class="n">GPIOB</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">GPIO_InitStructure</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//I2Cé…ç½®
</span></span></span><span class="line"><span class="cl"><span class="n">I2C_InitTypeDef</span> <span class="n">I2C_InitStructure</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">I2C_InitStructure</span><span class="p">.</span><span class="n">I2C_Mode</span> <span class="o">=</span> <span class="n">I2C_Mode_I2C</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">I2C_InitStructure</span><span class="p">.</span><span class="n">I2C_ClockSpeed</span> <span class="o">=</span> <span class="mi">50000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">I2C_InitStructure</span><span class="p">.</span><span class="n">I2C_DutyCycle</span> <span class="o">=</span> <span class="n">I2C_DutyCycle_2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">I2C_InitStructure</span><span class="p">.</span><span class="n">I2C_Ack</span> <span class="o">=</span> <span class="n">I2C_Ack_Enable</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">I2C_InitStructure</span><span class="p">.</span><span class="n">I2C_AcknowledgedAddress</span> <span class="o">=</span> <span class="n">I2C_AcknowledgedAddress_7bit</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">I2C_InitStructure</span><span class="p">.</span><span class="n">I2C_OwnAddress1</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nf">I2C_Init</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">I2C_InitStructure</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//I2Cä½¿èƒ½
</span></span></span><span class="line"><span class="cl"><span class="nf">I2C_Cmd</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">ENABLE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//ç­‰å¾…äº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">I2C_WaitEvent</span><span class="p">(</span><span class="n">I2C_TypeDef</span><span class="o">*</span> <span class="n">I2Cx</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">I2C_EVENT</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">uint32_t</span> <span class="n">Timeout</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Timeout</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="nf">I2C_CheckEvent</span><span class="p">(</span><span class="n">I2Cx</span><span class="p">,</span> <span class="n">I2C_EVENT</span><span class="p">)</span> <span class="o">!=</span> <span class="n">SUCCESS</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Timeout</span> <span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">Timeout</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="cm">/*è¶…æ—¶çš„é”™è¯¯å¤„ç†ä»£ç ï¼Œå¯ä»¥æ·»åŠ åˆ°æ­¤å¤„*/</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">I2C_WriteReg</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">RegAddress</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">Data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_GenerateSTART</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">ENABLE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_WaitEvent</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">I2C_EVENT_MASTER_MODE_SELECT</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_Send7bitAddress</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">ADDRESS</span><span class="p">,</span> <span class="n">I2C_Direction_Transmitter</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_WaitEvent</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_SendData</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">RegAddress</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_WaitEvent</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">I2C_EVENT_MASTER_BYTE_TRANSMITTING</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_SendData</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">Data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_WaitEvent</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">I2C_EVENT_MASTER_BYTE_TRANSMITTED</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_GenerateSTOP</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">ENABLE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">uint8_t</span> <span class="nf">I2C_ReadReg</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">RegAddress</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">uint8_t</span> <span class="n">Data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_GenerateSTART</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">ENABLE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_WaitEvent</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">I2C_EVENT_MASTER_MODE_SELECT</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_Send7bitAddress</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">ADDRESS</span><span class="p">,</span> <span class="n">I2C_Direction_Transmitter</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_WaitEvent</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_SendData</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">RegAddress</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_WaitEvent</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">I2C_EVENT_MASTER_BYTE_TRANSMITTED</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_GenerateSTART</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">ENABLE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_WaitEvent</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">I2C_EVENT_MASTER_MODE_SELECT</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_Send7bitAddress</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">ADDRESS</span><span class="p">,</span> <span class="n">I2C_Direction_Receiver</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_WaitEvent</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">I2C_EVENT_MASTER_RECEIVER_MODE_SELECTED</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_AcknowledgeConfig</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">DISABLE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_GenerateSTOP</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">ENABLE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_WaitEvent</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">I2C_EVENT_MASTER_BYTE_RECEIVED</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="n">Data</span> <span class="o">=</span> <span class="nf">I2C_ReceiveData</span><span class="p">(</span><span class="n">I2C2</span><span class="p">);</span>                                 
</span></span><span class="line"><span class="cl">    <span class="nf">I2C_AcknowledgeConfig</span><span class="p">(</span><span class="n">I2C2</span><span class="p">,</span> <span class="n">ENABLE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">Data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>I2C_InitTypeDef</code>ä¸ºI2Cé…ç½®ç»“æ„ä½“
<ul>
<li><code>I2C_Mode</code>ä¸ºI2Cæ¨¡å¼</li>
<li><code>I2C_ClockSpeed</code>ä¸ºæ—¶é’Ÿé¢‘ç‡</li>
<li><code>I2C_DutyCycle</code>ä¸ºI2Cå¿«é€Ÿæ¨¡å¼å ç©ºæ¯”</li>
<li><code>I2C_Ack</code>ä¸ºå“åº”ä½¿èƒ½</li>
<li><code>I2C_AcknowledgedAddress</code>ä¸ºåœ°å€æ¨¡å¼</li>
<li><code>I2C_OwnAddress1</code>ä¸ºæœ¬è®¾å¤‡çš„ç¬¬ä¸€ä¸ªID</li>
</ul>
</li>
<li><code>I2C_GenerateSTART</code>å‡½æ•°å‘é€èµ·å§‹æ¡ä»¶</li>
<li><code>I2C_Send7bitAddress</code>å‡½æ•°å‘é€7ä½åœ°å€</li>
<li><code>I2C_SendData</code>å‡½æ•°å‘é€æ•°æ®</li>
<li><code>I2C_GenerateSTOP</code>å‡½æ•°å‘é€ç»ˆæ­¢æ¡ä»¶</li>
<li><code>I2C_AcknowledgeConfig</code>å‡½æ•°é…ç½®åº”ç­”</li>
<li><code>I2C_CheckEvent</code>å‡½æ•°è¯»å–çŠ¶æ€</li>
<li><code>I2C_ReceiveData</code>å‡½æ•°è¯»å–ç»“æœ</li>
</ul>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>I2C_EVENT</th>
          <th>äº‹ä»¶</th>
          <th>å€¼</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>I2C_EVENT_SLAVE_TRANSMITTER_ADDRESS_MATCHED</td>
          <td>EV1</td>
          <td>((uint32_t)0x00060082)</td>
      </tr>
      <tr>
          <td>I2C_EVENT_SLAVE_RECEIVER_ADDRESS_MATCHED</td>
          <td>EV1</td>
          <td>((uint32_t)0x00020002)</td>
      </tr>
      <tr>
          <td>I2C_EVENT_SLAVE_TRANSMITTER_SECONDADDRESS_MATCHED</td>
          <td>EV1</td>
          <td>((uint32_t)0x00860080)</td>
      </tr>
      <tr>
          <td>I2C_EVENT_SLAVE_RECEIVER_SECONDADDRESS_MATCHED</td>
          <td>EV1</td>
          <td>((uint32_t)0x00820000)</td>
      </tr>
      <tr>
          <td>I2C_EVENT_SLAVE_GENERALCALLADDRESS_MATCHED</td>
          <td>EV1</td>
          <td>((uint32_t)0x00120000)</td>
      </tr>
      <tr>
          <td>I2C_EVENT_SLAVE_BYTE_RECEIVED</td>
          <td>EV2</td>
          <td>((uint32_t)0x00020040)</td>
      </tr>
      <tr>
          <td>(I2C_EVENT_SLAVE_BYTE_RECEIVED| I2C_FLAG_DUALF)</td>
          <td>EV2</td>
          <td></td>
      </tr>
      <tr>
          <td>(I2C_EVENT_SLAVE_BYTE_RECEIVED| I2C_FLAG_GENCALL)</td>
          <td>EV2</td>
          <td></td>
      </tr>
      <tr>
          <td>I2C_EVENT_SLAVE_BYTE_TRANSMITTED</td>
          <td>EV3</td>
          <td>((uint32_t)0x00060084)</td>
      </tr>
      <tr>
          <td>(I2C_EVENT_SLAVE_BYTE_TRANSMITTED| I2C_FLAG_DUALF)</td>
          <td>EV3</td>
          <td></td>
      </tr>
      <tr>
          <td>(I2C_EVENT_SLAVE_BYTE_TRANSMITTED| I2C_FLAG_GENCALL)</td>
          <td>EV3</td>
          <td></td>
      </tr>
      <tr>
          <td>I2C_EVENT_SLAVE_ACK_FAILURE</td>
          <td>EV3_2</td>
          <td>((uint32_t)0x00000400)</td>
      </tr>
      <tr>
          <td>I2C_EVENT_SLAVE_STOP_DETECTED</td>
          <td>EV4</td>
          <td>((uint32_t)0x00000010)</td>
      </tr>
      <tr>
          <td>I2C_EVENT_MASTER_MODE_SELECT</td>
          <td>EV5</td>
          <td></td>
      </tr>
      <tr>
          <td>I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED</td>
          <td>EV6</td>
          <td></td>
      </tr>
      <tr>
          <td>I2C_EVENT_MASTER_RECEIVER_MODE_SELECTED</td>
          <td>EV6</td>
          <td></td>
      </tr>
      <tr>
          <td>I2C_EVENT_MASTER_BYTE_RECEIVED</td>
          <td>EV7</td>
          <td></td>
      </tr>
      <tr>
          <td>I2C_EVENT_MASTER_BYTE_TRANSMITTING</td>
          <td>EV8</td>
          <td></td>
      </tr>
      <tr>
          <td>I2C_EVENT_MASTER_BYTE_TRANSMITTED</td>
          <td>EV8_2</td>
          <td></td>
      </tr>
      <tr>
          <td>I2C_EVENT_MASTER_MODE_ADDRESS10</td>
          <td>EV9</td>
          <td></td>
      </tr>
  </tbody>
</table></div>
<h3 id="i2cäº‹ä»¶æµç¨‹å¸¸ç”¨çš„ä¸»æ¨¡å¼">I2Cäº‹ä»¶æµç¨‹ï¼ˆå¸¸ç”¨çš„ä¸»æ¨¡å¼ï¼‰
</h3><h4 id="é€šè®¯å¼€å§‹">é€šè®¯å¼€å§‹
</h4><ul>
<li>EV5</li>
<li>I2C_EVENT_MASTER_MODE_SELECT</li>
<li>After sending the START condition (I2C_GenerateSTART() function) the master has to wait for this event. It means that the Start condition has been correctly released on the I2C bus (the bus is free, no other devices is communicating).</li>
<li>å‘é€ é€šè®¯å¯åŠ¨æ¡ä»¶ï¼ˆI2C_GenerateSTART() å‡½æ•°ï¼‰åï¼Œä¸»è®¾å¤‡å¿…é¡»ç­‰å¾…æ­¤äº‹ä»¶ï¼ˆEV5ï¼‰ã€‚ æ­¤äº‹ä»¶æ„å‘³ç€I2Cæ€»çº¿ä¸Šçš„å¯åŠ¨æ¡ä»¶å·²æ­£ç¡®é‡Šæ”¾ï¼ˆæ€»çº¿ç©ºé—²ï¼Œæ²¡æœ‰å…¶ä»–è®¾å¤‡æ­£åœ¨é€šä¿¡ï¼‰ã€‚</li>
</ul>
<h4 id="åœ°å€ç¡®è®¤">åœ°å€ç¡®è®¤
</h4><ul>
<li>EV6</li>
<li>I2C_EVENT_MASTER_RECEIVER_MODE_SELECTED</li>
<li>After checking on EV5 (start condition correctly released on the bus), the master sends the address of the slave(s) with which it will communicate (I2C_Send7bitAddress() function, it also determines the direction of the communication: Master transmitter or Receiver). Then the master has to wait that a slave acknowledges his address. If an acknowledge is sent on the bus, one of the following events will be set:
<ol>
<li>In case of Master Receiver (7-bit addressing): the I2C_EVENT_MASTER_RECEIVER_MODE_SELECTED event is set.</li>
<li>In case of Master Transmitter (7-bit addressing): the I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED is set</li>
<li>In case of 10-Bit addressing mode, the master (just after generating the START and checking on EV5) has to send the header of 10-bit addressing mode (I2C_SendData() function). Then master should wait on EV9. It means that the 10-bit addressing header has been correctly sent on the bus. Then master should send the second part of the 10-bit address (LSB) using the function I2C_Send7bitAddress(). Then master should wait for event EV6.</li>
</ol>
</li>
<li>ä¸»è®¾å¤‡å‘é€ä¸å…¶é€šä¿¡çš„ä»è®¾å¤‡çš„åœ°å€ï¼ŒåŒæ—¶ç¡®å®šé€šä¿¡æ–¹å‘ï¼Œç„¶åä¸»è®¾å¤‡åº”è¯¥ç­‰å¾…äº‹ä»¶EV6ã€‚</li>
</ul>
<h4 id="é€šè®¯äº‹ä»¶">é€šè®¯äº‹ä»¶
</h4><ul>
<li>EV8ã€EV8_2 / EV7</li>
<li>I2C_EVENT_MASTER_BYTE_TRANSMITTINGã€I2C_EVENT_MASTER_BYTE_TRANSMITTED / I2C_EVENT_MASTER_BYTE_RECEIVED</li>
</ul>
<h5 id="others">Others
</h5><p>If a communication is established (START condition generated and slave address acknowledged) then the master has to check on one of the following events for communication procedures:</p>
<ol>
<li>Master Receiver mode: The master has to wait on the event EV7 then to read the data received from the slave (I2C_ReceiveData() function).</li>
<li>Master Transmitter mode: The master has to send data (I2C_SendData() function) then to wait on event EV8 or EV8_2. These two events are similar:</li>
</ol>
<ul>
<li>EV8 means that the data has been written in the data register and is being shifted out.</li>
<li>EV8_2 means that the data has been physically shifted out and output on the bus.</li>
<li>In most cases, using EV8 is sufficient for the application. Using EV8_2 leads to a slower communication but ensure more reliable test. EV8_2 is also more suitable than EV8 for testing on the last data transmission (before Stop condition generation).</li>
</ul>
<ol start="3">
<li>In case the user software does not guarantee that this event EV7 is managed before the current byte end of transfer, then user may check on EV7 and BTF flag at the same time (ie. (I2C_EVENT_MASTER_BYTE_RECEIVED | I2C_FLAG_BTF)). In this case the communication may be slower.</li>
</ol>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        const elementsToRender = [".main-article", ".widget--toc"];

        elementsToRender.forEach(selector => {
            const element = document.querySelector(selector);
            if (element) {
                renderMathInElement(element, {
                    delimiters: [
                        { left: "$$", right: "$$", display: true },
                        { left: "$", right: "$", display: false },
                        { left: "\\(", right: "\\)", display: false },
                        { left: "\\[", right: "\\]", display: true }
                    ],
                    ignoredClasses: ["gist"]
                });
            }
        });
    });
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/stm32-spi/">
        
        

        <div class="article-details">
            <h2 class="article-title">STM32 SPI</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/stm32-dma/">
        
        

        <div class="article-details">
            <h2 class="article-title">STM32 DMA</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/stm32-usart/">
        
        

        <div class="article-details">
            <h2 class="article-title">STM32 USART</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/stm32-adc/">
        
        

        <div class="article-details">
            <h2 class="article-title">STM32 ADC</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/stm32-tim/">
        
        

        <div class="article-details">
            <h2 class="article-title">STM32 TIM</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2024 - 
        
        2026 Detail
    </section>
    
    <section class="powerby">
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.34.2">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >
    

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
